apply id: 'base'
apply id: 'docbook'

docbookSrcFileName = 'springsecurity.xml'
docbookHtml.stylesheet = new File(projectDir, 'src/xsl/html-custom.xsl')
docbookFoPdf.stylesheet = new File(projectDir, 'src/xsl/pdf-custom.xsl')

task doc (dependsOn: [docbookHtml, docbookFoPdf]) << {
    resourcesDir = new File(projectDir, 'src/resources')
    ant {
        docsDir = new File(buildDir, 'docs')
        copy(toDir: docsDir) {fileset(dir: resourcesDir)}
        copy(toDir: new File(docsDir, 'images')) {fileset(dir: new File(projectDir, 'src/docbook/images'))}
        // TODO: Add this to the plugin
        delete { fileset(dir: docsDir, includes: "*.fo")}
    }
}
